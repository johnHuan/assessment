{% extends 'layout.html' %}

{% block content %}
<!-- 这里是子模板填充的内容 -->
<div class="layui-body">
    <!-- 内容主体区域 -->
    <div style="padding: 15px;">
        <blockquote class="layui-elem-quote layui-text">
            {{ page_loc }}
        </blockquote>

        <div class="layui-card-body">
           <form class="layui-form">
<!--               <input hidden="hidden" type="text" name="word-name" lay-verify="required" class="layui-input">-->
<!--               <hr>-->
               <button class="layui-btn" id="btn-evaluating">开始评估</button>
           </form>
            <div id="progress" class="layui-hide layui-progress layui-progress-big" lay-showpercent="true" lay-filter="progress">
                <div class="layui-progress-bar" lay-percent=""></div>
            </div>
            <div class="layui-panel" style="margin: 20px 0;">
                <div style="padding: 32px;" id="id-res"></div>
            </div>
        </div>

    </div>
</div>
<script>

layui.use(['element', 'layer'], function(){
  var $ = layui.$;
  var form = layui.form;
  var layer = layui.layer;
  var element = layui.element;
  // 普通按钮
  $('#btn-evaluating').on('click', function(){
    //var field = data.field; // 获取表单全部字段值
    //var elem = data.elem; // 获取当前触发事件的元素 DOM 对象，一般为 button 标签
    //var elemForm = data.form; // 获取当前表单域的 form 元素对象，若容器为 form 标签才会返回。
    $.ajax({
        url: '/fire_evaluating_do',
        type: 'get',
        data: 'haha',
        beforeSend: function(xhr){
            layer.msg('评估中...，请稍候！', {icon: 16, time: 0});
            element.progress('filter-demo', '0%');
            $('#progress').removeClass('layui-hide');
            element.render('progress');
            $('#id-res').html('评估中...');
        },
        success: function (res) {
            $('#id-res').html(res)
        },
        error: function(xhr){

        },
        complete: function(xhr){
            layer.msg('评估完成!');
            $('#progress').addClass('layui-hide');
            layer.msg('上传完毕', {icon: 1});
        }
    });
  });
});
</script>
{% endblock %}
